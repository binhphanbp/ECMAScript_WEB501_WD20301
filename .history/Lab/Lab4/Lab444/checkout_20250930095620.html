<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán đơn hàng</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="container checkout-page">
      <a
        href="cart.html"
        class="change-address-btn"
        style="display: inline-block; margin-bottom: 15px"
      >
        ← Trở lại giỏ hàng
      </a>
      <h1 class="page-title">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
          <line x1="1" y1="10" x2="23" y2="10"></line>
        </svg>
        Thanh toán Đơn hàng
      </h1>

      <div class="main-layout">
        <section class="content-box checkout-left-box">
          <div class="shipping-header">
            <h2>Thông tin giao hàng</h2>
          </div>

          <form id="shipping-form">
            <div class="address-selector-wrapper form-group">
              <label for="address-selector"
                >Chọn hoặc thêm Địa chỉ giao hàng (*)</label
              >
              <select
                id="address-selector"
                onchange="loadSelectedAddress()"
              ></select>
            </div>

            <div id="address-input-fields">
              <div class="form-group">
                <label for="full-name">Họ và tên (*)</label>
                <input type="text" id="full-name" required />
              </div>
              <div class="form-group">
                <label for="phone">Số điện thoại (*)</label>
                <input type="tel" id="phone" required />
              </div>
              <div class="form-group">
                <label for="address-detail">Địa chỉ chi tiết (*)</label>
                <input type="text" id="address-detail" required />
              </div>
            </div>

            <div class="form-group">
              <label for="note">Ghi chú Đơn hàng</label>
              <textarea
                id="note"
                rows="3"
                placeholder="VD: Giờ giao hàng hành chính, gọi trước khi giao..."
              ></textarea>
            </div>
          </form>
        </section>

        <section class="content-box summary-box">
          <h2>Đơn hàng của bạn</h2>
          <div id="order-summary-items"></div>

          <div class="summary-details">
            <div class="summary-line">
              <span>Tạm tính</span>
              <span id="checkout-subtotal">0₫</span>
            </div>
            <div class="summary-line">
              <span>Phí vận chuyển</span>
              <span id="shipping-fee">20.000₫</span>
            </div>
            <div class="summary-line red">
              <span>Giảm giá (<span id="discount-code-label">Mã</span>)</span>
              <span id="checkout-discount">-0₫</span>
            </div>
          </div>

          <div class="payment-section">
            <h2>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                <line x1="1" y1="10" x2="23" y2="10"></line>
              </svg>
              Phương thức Thanh toán
            </h2>
            <div class="form-group">
              <select id="payment-method">
                <option value="COD" selected>
                  Thanh toán khi nhận hàng (COD)
                </option>
                <option value="BankTransfer">Chuyển khoản Ngân hàng</option>
                <option value="Momo">Ví điện tử Momo</option>
              </select>
            </div>
          </div>

          <div class="summary-total">
            <h3>Tổng thanh toán</h3>
            <h3 id="checkout-grand-total">0₫</h3>
          </div>

          <button class="btn btn-primary" onclick="placeOrder()">
            HOÀN TẤT ĐẶT HÀNG
          </button>
        </section>
      </div>

      <div id="order-success-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn" onclick="closeModal()">&times;</span>
          <h2>✅ Đặt hàng thành công!</h2>
          <div id="order-details-display"></div>
          <button
            class="btn btn-primary"
            onclick="window.location.href='index.html'"
            style="margin-top: 20px"
          >
            Quay về trang chủ
          </button>
        </div>
      </div>
    </main>

    <script src="main.js"></script>
  </body>
</html>
